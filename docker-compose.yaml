version: "3.8"

services:
  kuponi-web:
    # Usamos Nginx Alpine: La opción más ligera y rápida para sitios estáticos
    image: nginx:alpine
    container_name: kuponi-web
    restart: unless-stopped

    # Montamos la carpeta actual (donde están tus .html) en la carpeta pública de Nginx
    # :ro significa "read-only" (solo lectura) para mayor seguridad
    volumes:
      - ./:/usr/share/nginx/html:ro

    networks:
      - traefik-net

    labels:
      - "traefik.enable=true"
      # Regla para el dominio principal
      - "traefik.http.routers.kuponi-web.rule=Host(`kuponi.app`)"
      - "traefik.http.routers.kuponi-web.entrypoints=websecure"
      - "traefik.http.routers.kuponi-web.tls=true"
      - "traefik.http.routers.kuponi-web.tls.certresolver=le"
      # Nginx escucha en el puerto 80 internamente por defecto
      - "traefik.http.services.kuponi-web.loadbalancer.server.port=80"

networks:
  traefik-net:
    external: true
